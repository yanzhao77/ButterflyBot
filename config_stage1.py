#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
阶段1实盘测试配置文件
调整后的参数，更保守、更安全
"""

# ============================================
# 基础配置
# ============================================

# 交易对
SYMBOL = 'DOGE/USDT'
TIMEFRAME = '15m'

# 资金管理
INITIAL_CASH = 100.0  # 初始资金$100
MAX_POSITION_RATIO = 0.20  # 最大仓位20%（降低from 25%）
MIN_TRADE_AMOUNT = 10.0  # 最小交易金额$10

# ============================================
# 策略参数（阶段1调整）
# ============================================

# 信号阈值
CONFIDENCE_THRESHOLD = 0.08  # 置信度阈值（提高from 0.05）
# 说明：提高阈值可以减少低质量交易，提高胜率

# 止盈止损
STOP_LOSS_PCT = 0.02  # 止损2.0%（保持不变）
TAKE_PROFIT_PCT = 0.025  # 止盈2.5%（降低from 3.0%）
# 说明：降低止盈目标，更快锁定利润

# 时间管理
TIME_STOP_BARS = 15  # 时间止损15根K线（缩短from 20）
COOLDOWN_BARS = 5  # 冷却期5根K线（延长from 3）
# 说明：缩短持仓时间减少风险，延长冷却期避免频繁交易

# ============================================
# 风险控制（阶段1严格）
# ============================================

# 每日风控
DAILY_MAX_LOSS = 5.0  # 单日最大亏损$5（5%）
DAILY_MAX_TRADES = 10  # 单日最大交易10次
CONSECUTIVE_LOSS_PAUSE = 5  # 连续亏损5次暂停

# 每周风控
WEEKLY_MAX_LOSS = 10.0  # 单周最大亏损$10（10%）
WEEKLY_MAX_TRADES = 50  # 单周最大交易50次

# 账户风控
MAX_DRAWDOWN = 0.15  # 最大回撤15%
TOTAL_LOSS_STOP = 15.0  # 总亏损$15立即停止

# ============================================
# 警戒线设置
# ============================================

# 权益警戒
EQUITY_WARNING = 95.0  # 权益警戒线$95
EQUITY_DANGER = 90.0  # 权益危险线$90

# 性能警戒
WINRATE_WARNING = 0.45  # 胜率警戒线45%
WINRATE_DANGER = 0.40  # 胜率危险线40%
PROFIT_FACTOR_WARNING = 1.0  # 盈亏比警戒线1.0:1

# ============================================
# 交易时段
# ============================================

# 交易时间（北京时间）
TRADING_START_HOUR = 9  # 09:00开始
TRADING_END_HOUR = 18  # 18:00结束
# 说明：仅在工作时间交易，便于监控

# ============================================
# 滑点和手续费
# ============================================

SLIPPAGE_PCT = 0.001  # 滑点0.1%（实盘预估）
COMMISSION_PCT = 0.001  # 手续费0.1%

# ============================================
# 监控和通知
# ============================================

# 监控频率
MONITOR_INTERVAL = 900  # 监控间隔15分钟（900秒）

# 报告生成
GENERATE_DAILY_REPORT = True  # 生成每日报告
GENERATE_WEEKLY_REPORT = True  # 生成每周报告

# ============================================
# 数据和模型
# ============================================

# 数据路径
DATA_DIR = 'cached_data'
MODEL_DIR = 'models/registry'

# 模型配置
MODEL_TYPE = 'balanced'  # 使用平衡模型
MODEL_VERSION = 'latest'  # 使用最新版本

# ============================================
# 备份和日志
# ============================================

# 数据备份
BACKUP_ENABLED = True  # 启用备份
BACKUP_INTERVAL = 3600  # 备份间隔1小时

# 日志配置
LOG_LEVEL = 'INFO'  # 日志级别
LOG_FILE = 'stage1_trading.log'  # 日志文件

# ============================================
# 参数说明
# ============================================

"""
阶段1参数调整说明：

1. 提高置信度阈值（0.05 → 0.08）
   - 目的：减少低质量交易
   - 预期：交易次数减少20-30%，胜率提高3-5%

2. 降低止盈目标（3.0% → 2.5%）
   - 目的：更快锁定利润
   - 预期：止盈触发率提高，减少利润回吐

3. 缩短持仓时间（20根 → 15根）
   - 目的：减少市场风险暴露
   - 预期：时间止损触发更频繁，但减少大幅回撤

4. 延长冷却期（3根 → 5根）
   - 目的：避免情绪化频繁交易
   - 预期：交易质量提高，减少冲动交易

5. 降低最大仓位（25% → 20%）
   - 目的：降低单笔风险
   - 预期：单笔最大亏损从$6.25降至$5

对比模拟实盘：
- 模拟实盘：月均166次交易，收益33.26%
- 阶段1预期：月均120-140次交易，收益20-30%
- 风险降低：最大回撤从11.40%预期降至8-10%

调整原则：
- 保守优先：宁可少赚，不要多亏
- 稳定第一：追求稳定收益，不追求暴利
- 风控严格：严格执行风控，不存侥幸心理
"""

# ============================================
# 快速参考
# ============================================

def print_config():
    """打印当前配置"""
    print("="*60)
    print("阶段1实盘测试配置")
    print("="*60)
    print(f"\n💰 资金管理:")
    print(f"  初始资金: ${INITIAL_CASH}")
    print(f"  最大仓位: {MAX_POSITION_RATIO*100}%")
    print(f"  最小交易: ${MIN_TRADE_AMOUNT}")
    
    print(f"\n📊 策略参数:")
    print(f"  置信度阈值: {CONFIDENCE_THRESHOLD}")
    print(f"  止损: {STOP_LOSS_PCT*100}%")
    print(f"  止盈: {TAKE_PROFIT_PCT*100}%")
    print(f"  时间止损: {TIME_STOP_BARS}根")
    print(f"  冷却期: {COOLDOWN_BARS}根")
    
    print(f"\n🛡️ 风险控制:")
    print(f"  单日最大亏损: ${DAILY_MAX_LOSS}")
    print(f"  单日最大交易: {DAILY_MAX_TRADES}次")
    print(f"  最大回撤: {MAX_DRAWDOWN*100}%")
    print(f"  连续亏损暂停: {CONSECUTIVE_LOSS_PAUSE}次")
    
    print(f"\n⏰ 交易时段:")
    print(f"  开始: {TRADING_START_HOUR}:00")
    print(f"  结束: {TRADING_END_HOUR}:00")
    
    print(f"\n📈 预期表现:")
    print(f"  月交易次数: 120-140次")
    print(f"  月收益率: 20-30%")
    print(f"  预期胜率: 55-60%")
    print(f"  预期回撤: <10%")
    
    print(f"\n{'='*60}\n")

if __name__ == "__main__":
    print_config()
